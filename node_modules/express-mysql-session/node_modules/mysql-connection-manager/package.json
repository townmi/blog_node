{
  "name": "mysql-connection-manager",
  "description": "Manages keep-alive signals, reconnections for a MySQL connection or connection pool.",
  "version": "0.0.9",
  "main": "index.js",
  "scripts": {
    "test": "mocha"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/chill117/mysql-connection-manager"
  },
  "author": {
    "name": "Charles Hill",
    "email": "chill@degreesofzero.com"
  },
  "license": "MIT",
  "engines": {
    "node": ">=0.8.0"
  },
  "dependencies": {
    "debug": "2.1.0",
    "mysql": "2.5.3"
  },
  "devDependencies": {
    "mocha": "1.x"
  },
  "readmeFilename": "readme.md",
  "bugs": {
    "url": "https://github.com/chill117/mysql-connection-manager/issues"
  },
  "readme": "# mysql-connection-manager\n\n[![Build Status](https://travis-ci.org/chill117/mysql-connection-manager.svg?branch=master)](https://travis-ci.org/chill117/mysql-connection-manager)\n\nManages keep-alive signals, reconnections for a MySQL connection or connection pool.\n\n\n## Installation\n\nAdd to your application via `npm`:\n```\nnpm install mysql-connection-manager --save\n```\nThis will install `mysql-connection-manager` and add it to your application's `package.json` file.\n\n\n## How to Use\n\nTo have `mysql-connection-manager` create the connection for you:\n```js\nvar MySQLConnectionManager = require('mysql-connection-manager')\n\nvar options = {\n\thost: 'localhost',\n\tport: 3306,\n\tuser: 'db_user',\n\tpassword: 'password',\n\tdatabase: 'db_name'\n}\n\nvar manager = new MySQLConnectionManager(options)\n\nmanager.on('connect', function(connection) {\n\n\t// Connected!\n\n})\n\n// Pass the connection object to some other module, like this:\nvar something = new SomeThing(someOtherOptions, manager.connection)\n```\nThe connection object is the same as provided by [node-mysql](https://github.com/felixge/node-mysql).\n\nYou can also pass an already existing [node-mysql](https://github.com/felixge/node-mysql) connection object to `mysql-connection-manager`, like this:\n```js\nvar mysql = require('mysql')\nvar MySQLConnectionManager = require('mysql-connection-manager')\n\nvar options = {\n\thost: 'localhost',\n\tport: 3306,\n\tuser: 'db_user',\n\tpassword: 'password',\n\tdatabase: 'db_name'\n}\n\nvar connection = mysql.createConnection(options)\nvar manager = new MySQLConnectionManager(options, connection)\n```\n\nTo cleanly end the current connection:\n```js\nmanager.endConnection()\n```\n\n\n### Events\n\nThere are a few events that can be listened for on the `manager` object:\n```js\nmanager.on('connect', function(connection) {\n\n\t// A database connection has been established..\n\n})\n\nmanager.on('reconnect', function(connection) {\n\n\t// The database connection has been re-established..\n\n})\n\nmanager.on('disconnect', function() {\n\n\t// The database connection has been lost..\n\n})\n```\nThe `manager` object is extended with the [nodejs EventEmitter](http://nodejs.org/api/events.html), so you can use all of the methods that it provides as well: `on`, `off`, `once`, `emit`, etc.\n\n\n### Options\n\nA list of all available options:\n```js\nvar options = {\n\thost: 'localhost',// Host name for database connection.\n\tport: 3306,// Port number for database connection.\n\tuser: 'connect_mng_test',// Database user.\n\tpassword: 'password',// Password for the above database user.\n\tdatabase: 'connect_mng_test',// Database name.\n\tautoReconnect: true,// Whether or not to re-establish a database connection after a disconnect.\n\treconnectDelay: [\n\t\t500,// Time between each attempt in the first group of reconnection attempts; milliseconds.\n\t\t1000,// Time between each attempt in the second group of reconnection attempts; milliseconds.\n\t\t5000,// Time between each attempt in the third group of reconnection attempts; milliseconds.\n\t\t30000,// Time between each attempt in the fourth group of reconnection attempts; milliseconds.\n\t\t300000// Time between each attempt in the fifth group of reconnection attempts; milliseconds.\n\t],\n\tuseConnectionPooling: false,// Whether or not to use connection pooling.\n\treconnectDelayGroupSize: 5,// Number of reconnection attempts per reconnect delay value.\n\tmaxReconnectAttempts: 25,// Maximum number of reconnection attempts. Set to 0 for unlimited.\n\tkeepAlive: true,// Whether or not to send keep-alive pings on the database connection(s).\n\tkeepAliveInterval: 30000,// How frequently keep-alive pings will be sent; milliseconds.\n}\n```\n\n#### Reconnect Delays\n\nThe reconnect-related options may require a bit of additional explanation. With the default options shown above, the reconnect attempts will have the following delay pattern:\n\n* Attempts __#1__ through __#5__ will have a delay of __500 milliseconds__ each.\n* Attempts __#6__ through __#10__ will have a delay of __1 second__ each.\n* Attempts __#11__ through __#15__ will have a delay of __5 seconds__ each.\n* Attempts __#16__ through __#20__ will have a delay of __30 seconds__ each.\n* Attempts __#21__ through __#25__ will have a delay of __5 minutes__ each.\n\nIf the `reconnectDelayGroupSize` was 3:\n\n* Attempts __#1__ through __#3__ will have a delay of __500 milliseconds__ each.\n* Attempts __#4__ through __#6__ will have a delay of __1 second__ each.\n* Attempts __#7__ through __#9__ will have a delay of __5 seconds__ each.\n* Attempts __#10__ through __#12__ will have a delay of __30 seconds__ each.\n* Attempts __#13__ through __#25__ will have a delay of __5 minutes__ each.\n\nAny reconnect attempts beyond the last value in the `reconnectDelay` array will simply use the last value from the `reconnectDelay` array.\n\nAlternatively you may supply a single integer value to the `reconnectDelay` option to have one delay time between all reconnect attempts, like this:\n```js\nvar options = {\n\treconnectDelay: 500\n}\n```\n\n\n### Connection Pooling\n\nWhen `useConnectionPooling` is set to `TRUE`, the `manager.connection` object is a connection pool object returned by `mysql.createPool`; see [node-mysql](https://github.com/felixge/node-mysql#pooling-connections) for details.\n\n\n### Debugging\n\n`mysql-connection-manager` uses the [debug module](https://github.com/visionmedia/debug) to output debug messages to the console. To output all debug messages, run your node app with the `DEBUG` environment variable:\n```\nDEBUG=mysql-connection-manager node your-app.js\n```\nThis will output log messages as well as error messages from `mysql-connection-manager`.\n\n\n## Contributing\n\nThere are a number of ways you can contribute:\n\n* **Improve or correct the documentation** - All the documentation is in this `readme.md` file. If you see a mistake, or think something should be clarified or expanded upon, please [submit a pull request](https://github.com/chill117/mysql-connection-manager/pulls/new)\n* **Report a bug** - Please review [existing issues](https://github.com/chill117/mysql-connection-manager/issues) before submitting a new one; to avoid duplicates. If you can't find an issue that relates to the bug you've found, please [create a new one](https://github.com/chill117/mysql-connection-manager/issues).\n* **Request a feature** - Again, please review the [existing issues](https://github.com/chill117/mysql-connection-manager/issues) before posting a feature request. If you can't find an existing one that covers your feature idea, please [create a new one](https://github.com/chill117/mysql-connection-manager/issues).\n* **Fix a bug** - Have a look at the [existing issues](https://github.com/chill117/mysql-connection-manager/issues) for the project. If there's a bug in there that you'd like to tackle, please feel free to do so. I would ask that when fixing a bug, that you first create a failing test that proves the bug. Then to fix the bug, make the test pass. This should hopefully ensure that the bug never creeps into the project again. After you've done all that, you can [submit a pull request](https://github.com/chill117/mysql-connection-manager/pulls/new) with your changes.\n\nBefore you contribute code, please read through at least some of the source code for the project. I would appreciate it if any pull requests for source code changes follow the coding style of the rest of the project.\n\nNow if you're still interested, you'll need to get your local environment configured.\n\n\n### Configure Local Environment\n\n#### Step 1: Get the Code\n\nFirst, you'll need to pull down the code from GitHub:\n```\ngit clone git@github.com:chill117/mysql-connection-manager.git\n```\n\n#### Step 2: Install Dependencies\n\nSecond, you'll need to install the project dependencies as well as the dev dependencies. To do this, simply run the following from the directory you created in step 1:\n```\nnpm install\n```\n\n#### Step 3: Set Up the Test Database\n\nNow, you'll need to set up a local test database:\n```js\n{\n\thost: 'localhost',\n\tport: 3306,\n\tuser: 'connect_mng_test',\n\tpassword: 'password',\n\tdatabase: 'connect_mng_test'\n}\n```\n*These database credentials are located at `test/config/database.js`*\n\n\n### Running Tests\n\nWith your local environment configured, running tests is as simple as:\n```\nnpm test\n```\nThis module supports node.js `0.8.x` and `0.10.x`. If you are planning to contribute, please test your changes against all supported versions of node. If you need help setting up multiple versions of node in your development environment, [this article](https://degreesofzero.com/article/how-to-install-multiple-versions-of-nodejs.html) can guide you through the process.",
  "homepage": "https://github.com/chill117/mysql-connection-manager",
  "_id": "mysql-connection-manager@0.0.9",
  "dist": {
    "shasum": "f21bd3a9914426ad403202f204ac80a56e0a2b41"
  },
  "_from": "mysql-connection-manager@0.0.9",
  "_resolved": "https://registry.npmjs.org/mysql-connection-manager/-/mysql-connection-manager-0.0.9.tgz"
}
