---
title: ES6数组相关新特性
date: 2019-02-09 22:31:56
tags:
- JS
categories:
- 前端
---

### ES6数组相关新特性

#### 数组的扩展运算
```js
  const fn = (a, b, c) => { ... }
  fn(...[1,2,3])
  // ...[1,2,3] 就是把数组展开成 1，2，3
  [...[1,2], 3] => [1,2,3]
  // 如果展开一个空数组，那不会产生效果
  [...[], 3] => [3]
```
<!-- more -->
那数组的扩展运算我们可以用来干嘛？
1. 复制数组
```js
  const a = [1, 2]
  let b = a;
  // 这是样就是地址引用，b、a指向同一个地址
  // 现在可以这样
  let c = [...a]
  // 这样a数组就被拷贝到了c,这个时候你修改c的元数据是不会改到a的
  // 但是如果a的元数据是对象类型的，你仅修改c的元素据本身，不会修改a的元数据，
  // 你如果修改c元数据的属性，那对应的a的元数据会有变化的
  const a1 = [{a: 1}, 3, {b: 2}];
  let c1 = [...a1]
  c1[2] = 1;
  // a1 => [{a: 1}, 3, {b: 2}];
  // c1 =>[{a: 1}, 3,1];
  c1[0].a = 2;
  // a1 => [{a: 2}, 3, {b: 2}];
  // c1 =>[{a: 2}, 3,1];
```
2. 合并数组
```js
  const a = [1, 2];
  const b = [3, 4];
  const c = [5, 6];
  // 旧的合并
  let d = a.concat(b, c);
  // 现在可以使用展开运算
  let d = [...a, ...b, ...c];
```
3. 解构赋值结合, 注意，扩展运算符的参数要放到追后
```js
  let [a, ...b] = [1, 2, 3]
  // a => 1 b => [2, 3]
  let [a1, ...b1] = []
  // a => undefined b => []
  let [a2, ...b2] = [1]
  // a => 1, b => []
```

#### 类数组的操作from和of
1. Array.from, 将*类数组对象*和*可遍历的对象*，转换成真正的数组
```js
  const o = { '1': 1, '2': 2}
  let a = Array.from(o)
  // a => []
  const o1 = { '1': 1, '2': 2, length: 3}
  let a1 = Array.from(o1)
  // a => [undefined, 1 ,2 ]
```
1. Array.of, 将一组数组转换成数组，弥补Array()，因为参数导致的差异性
```js
  Array.of(1,2,3);    // [1,2,3]
  Array.of(1).length; // 1

  Array();       // []
  Array(2);      // [,] 1个参数时，为指定数组长度
  Array(1,2,3);  // [1,2,3] 多于2个参数，组成新数组
```

#### find()和findIndex()
find()和findIndex() 都是接受一个函数为参数，函数放回布尔值
1. find() 是找到第一个对应的元素， 如果没有就是undefined;
```js
  const a = [1, 3, 4, 5];
  let r = a.find((e, i, a) => return e < 223);
  // r => 1
  // e 是每个元素、 i 是元素对应的下标、a是原数组
```
2. findIndex() 是找到第一个对应元素的下标， 如果没有就是 -1；

#### fill()
fill 是填充数组的，很少使用
```js
  new Array(3).fill('a');   // ['a','a','a']
  [1,2,3].fill('a');        // ['a','a','a']
  // fill 还可以接受两个参数
  [1,2,3].fill('a', 0, 1);        // ['a', 2, 3]
  // 可以理解为[1, 2, 3].splice(0, 1, 'a')
```

#### entries(),keys(),values()
主要用于遍历数组，entries()对键值对遍历，keys()对键名遍历，values()对键值遍历。
```js
  for (let i of ['a', 'b'].keys()){
    console.log(i)
  }
  // 0
  // 1

  for (let e of ['a', 'b'].values()){
    console.log(e)
  }
  // 'a'
  // 'b'

  for (let e of ['a', 'b'].entries()){
    console.log(e)
  }
  // 0 'a'
  // 1 'b'
```

#### includes()
用于表示数组是否包含给定的值，与字符串的includes方法类似,

#### flat()和flatMap()
1. flat()用于将数组一维化，返回一个新数组，不影响原数组。默认一次只一维化一层数组，若需多层，则传入一个整数参数指定层数。若要一维化所有层的数组，则传入Infinity作为参数。
```js
  [1, 2, [2,3]].flat();        // [1,2,2,3]
  [1,2,[3,[4,[5,6]]]].flat(3); // [1,2,3,4,5,6]
  [1,2,[3,[4,[5,6]]]].flat('Infinity'); // [1,2,3,4,5,6]
```
2. flatMap() 是先对原数组map，然后对得到的新数组再flat()一下，flatMap() 仅能维化一层数组.
```js
  [1, 2, 3].flatMap(e => [e, e * 2]);
  // [1, 2,  2, 4,  3, 6]
```